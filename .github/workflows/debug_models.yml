name: Debug Gemini Models

on:
  workflow_dispatch: # 只有手动点击才会触发

jobs:
  check-models:
    runs-on: ubuntu-latest
    
    steps:
      - name: 下载代码
        uses: actions/checkout@v3

      - name: 安装 Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10' # 使用较新的 Python

      - name: 更新依赖库
        run: |
          # 强制更新到最新版，防止库太老找不到新模型
          pip install -U google-generativeai

      - name: 运行体检脚本
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        run: python check_models.py
